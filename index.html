<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operator [Your Name] - Portfolio Terminal v3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-darkest: #050608;
            --bg-dark: #0a0c0f;
            --bg-panel: #101419;
            --bg-card: #181c22;
            --border-subtle: #303841;
            --border-medium: #4a4e50;
            --text-primary: #c5c6c7;
            --text-secondary: #9ea4a8;
            --text-muted: #787c82;
            --accent-orange: #f07c3a;
            --accent-orange-dark: #d96f32;
            --accent-cyan: #00e0e0;
            --accent-cyan-dark: #00b8b8;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            margin: 0; padding: 0; box-sizing: border-box;
            overflow: hidden; /* Hide scrollbars during initial logon */
        }
        .font-terminal { font-family: 'Share Tech Mono', monospace; }
        .text-accent-orange { color: var(--accent-orange); }
        .border-accent-orange { border-color: var(--accent-orange); }
        .bg-accent-orange { background-color: var(--accent-orange); }
        .text-accent-cyan { color: var(--accent-cyan); }
        .border-accent-cyan { border-color: var(--accent-cyan); }
        .block-element { border-radius: 0px !important; }

        /* Initial Full-Screen Log-on */
        #initial-logon-screen {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background-color: #000; /* Pitch black for boot-up */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            padding: 20px;
            box-sizing: border-box;
        }
        #initial-log-output {
            font-family: 'Share Tech Mono', monospace;
            color: var(--accent-cyan);
            font-size: clamp(0.9rem, 2.5vw, 1.2rem); /* Responsive font size */
            width: 100%;
            max-width: 800px;
            height: 80%;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre-wrap;
            border: 1px solid var(--border-medium);
            background-color: rgba(10,12,15,0.5); /* Slightly transparent dark bg */
            padding: 15px;
        }
        #initial-log-output .log-line.jargon { color: var(--accent-cyan); }
        #initial-log-output .log-line.mihwa { color: var(--accent-orange); font-weight: bold; animation: subtle-pulse 1.5s infinite; }
        #initial-log-output .log-line.system { color: #fff; font-weight: bold; }

        @keyframes subtle-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }


        /* Hide main content initially */
        #sidebar, #main-content {
            display: none;
        }
        body.loaded {
            overflow: visible; /* Restore scrollbars after load */
        }
        body.loaded #sidebar, body.loaded #main-content {
            display: flex; /* Or 'block' for main-content if not flex container itself */
        }
        body.loaded #main-content { display: block; } /* main-content is not a flex container */


        /* Sidebar (Common to all pages) */
        #sidebar {
            width: 280px; background-color: var(--bg-darkest);
            border-right: 1px solid var(--border-subtle); padding: 24px;
            height: 100vh; position: fixed; top: 0; left: 0;
            flex-direction: column; overflow-y: auto; /* display: flex already applied by .loaded */
        }
        .sidebar-title {
            font-size: 1.5rem; letter-spacing: 2px;
            margin-bottom: 24px; text-align: center;
        }
        /* Modified Main Menu Appearance */
        .main-nav a {
            display: block;
            padding: 10px 15px; /* Adjusted padding */
            margin-bottom: 6px; /* Slightly reduced margin */
            text-transform: uppercase;
            border-left: 3px solid transparent; /* Indicator bar */
            background-color: var(--bg-panel); /* Base background for menu items */
            color: var(--text-secondary);
            transition: color 0.2s ease, border-left-color 0.2s ease, background-color 0.2s ease;
        }
        .main-nav a:hover {
            color: var(--accent-orange);
            border-left-color: var(--accent-orange);
            background-color: var(--bg-card); /* Darker on hover */
        }
        .main-nav a.active {
            color: var(--accent-orange);
            border-left-color: var(--accent-orange);
            background-color: var(--bg-card); /* Active state same as hover for consistency */
            font-weight: bold; /* Make active link bolder */
        }

        #animated-log-screen { /* Sidebar log */
            background-color: #000; border: 1px solid var(--border-medium);
            padding: 12px; height: 150px; overflow-y: auto;
            margin-top: 24px; margin-bottom: 24px; font-size: 0.8rem;
            line-height: 1.5; white-space: pre-wrap;
        }
        #animated-log-screen .log-line.jargon { color: var(--accent-cyan); }
        #animated-log-screen .log-line.mihwa { color: var(--accent-orange); font-weight: bold; }
        .sidebar-controls { margin-top: auto; }
        .sidebar-controls h3 {
            font-family: 'Share Tech Mono', monospace; font-size: 1rem;
            color: var(--text-secondary); margin-bottom: 8px;
            border-top: 1px solid var(--border-subtle); padding-top: 16px;
        }
        #search-input, #category-filter {
            width: 100%; padding: 8px; background-color: var(--bg-panel);
            border: 1px solid var(--border-subtle); color: var(--text-primary);
            margin-bottom: 12px;
        }
        #search-input:focus, #category-filter:focus {
            outline: none; border-color: var(--accent-orange);
        }

        /* Main Content Area (This part changes per page) */
        #main-content {
            margin-left: 280px; padding: 32px;
            width: calc(100% - 280px); overflow-y: auto; height: 100vh;
             /* display: block applied by .loaded */
        }
        .section-panel {
            background-color: var(--bg-panel); border: 1px solid var(--border-subtle);
            padding: 24px; margin-bottom: 32px;
        }
        .section-title {
            font-size: 1.75rem; padding-bottom: 12px;
            border-bottom: 1px solid var(--border-medium); margin-bottom: 24px;
            text-transform: uppercase; letter-spacing: 1px;
        }
        .hero-section { text-align: center; border-bottom: 2px solid var(--accent-orange); }
        .hero-title { font-size: 2.5rem; letter-spacing: 3px; line-height: 1.2; }
        .hero-subtitle { font-size: 1.125rem; color: var(--text-secondary); margin-top: 8px; }
        .status-indicator {
            display: inline-block; width: 12px; height: 12px;
            background-color: var(--accent-cyan); margin-right: 8px;
            vertical-align: middle; animation: pulse-cyan 2s infinite;
        }
        @keyframes pulse-cyan { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .btn {
            padding: 12px 24px; text-transform: uppercase; letter-spacing: 1px;
            border: 1px solid; transition: background-color 0.2s ease, color 0.2s ease;
            cursor: pointer;
        }
        .btn-primary {
            background-color: var(--accent-orange); border-color: var(--accent-orange);
            color: var(--bg-darkest);
        }
        .btn-primary:hover {
            background-color: var(--accent-orange-dark);
            border-color: var(--accent-orange-dark);
        }
        .footer-terminal {
            background-color: var(--bg-panel); text-align: center;
            padding: 24px; border-top: 1px solid var(--border-subtle);
            font-size: 0.875rem; color: var(--text-muted); margin-top: 32px;
        }
        /* Footer Text Glow & Change */
        #security-status-text {
            animation: glow-animation 2s infinite alternate;
            display: inline-block; /* Needed for text-shadow to not break line */
        }
        @keyframes glow-animation {
            from { text-shadow: 0 0 3px var(--accent-cyan), 0 0 5px var(--accent-cyan), 0 0 7px var(--accent-cyan-dark); }
            to { text-shadow: 0 0 5px var(--accent-cyan-dark), 0 0 8px var(--accent-cyan-dark), 0 0 10px var(--accent-orange); }
        }

        .project-card { /* Styles for project cards if they appear on index.html */
            background-color: var(--bg-card); border: 1px solid var(--border-subtle);
            transition: border-color 0.3s ease; overflow: hidden; margin-bottom: 16px;
        }
        .project-card.hidden { display: none; }
        .project-card:hover { border-color: var(--accent-orange); }
        .project-image-placeholder {
            background-color: #252a31; height: 180px; display: flex;
            align-items: center; justify-content: center; color: #565c64;
        }
        .project-title { font-size: 1.25rem; }

        @media (max-width: 768px) {
            body.loaded #sidebar { /* Ensure sidebar specific style for loaded state */
                position: static; width: 100%; height: auto;
                border-right: none; border-bottom: 1px solid var(--border-subtle);
                overflow-y: visible;
            }
            body.loaded #main-content { margin-left: 0; width: 100%; height: auto; padding: 16px; }
            
            #initial-log-output { font-size: 0.8rem; padding: 10px; }
            .sidebar-title { font-size: 1.25rem; margin-bottom: 16px; }
            .main-nav a { padding: 10px 12px; }
            #animated-log-screen { height: 100px; font-size: 0.75rem;}
            .hero-title { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <!-- Initial Full-Screen Log-on Screen -->
    <div id="initial-logon-screen">
        <div id="initial-log-output"></div>
    </div>

    <!-- Sidebar (Common to all pages) -->
    <aside id="sidebar" class="block-element">
        <div class="sidebar-title font-terminal text-accent-orange">OPERATOR CONSOLE</div>
        <nav class="main-nav font-terminal">
            <a href="index.html" class="block-element">Home_Interface</a>
            <a href="about.html" class="block-element">Auth_Logs // About</a>
            <a href="projects.html" class="block-element">Data_Streams // Projects</a>
            <a href="skills.html" class="block-element">Core_Matrix // Skills</a>
            <a href="hobbies.html" class="block-element">Recreation_Protocols // Hobbies</a>
            <a href="contact.html" class="block-element">Comms_Link // Contact</a>
        </nav>
        <div id="animated-log-screen" class="font-terminal block-element">
            <!-- Sidebar log will appear here after initial logon -->
        </div>
        <div class="sidebar-controls">
            <h3>// PROJECT_ARCHIVE_QUERY</h3>
            <input type="text" id="search-input" class="font-terminal block-element" placeholder="Search Projects...">
            <h3>// CATEGORY_SORT</h3>
            <select id="category-filter" class="font-terminal block-element">
                <option value="all">All Categories</option>
                <option value="web-dev">Web Development</option>
                <option value="data-vis">Data Visualization</option>
                <option value="ui-ux">UI/UX Design</option>
                <option value="cyber-sec">Cyber Security</option>
            </select>
        </div>
    </aside>

    <!-- Main Content Area (This part changes per page) -->
    <main id="main-content">
        <!-- =============================================================== -->
        <!-- START: Page Specific Content for index.html (Home Page)        -->
        <!-- =============================================================== -->
        <section id="hero" class="hero-section section-panel block-element">
            <h1 class="hero-title font-terminal text-accent-orange">
                <span class="status-indicator block-element"></span>SYSTEM ACCESS GRANTED
            </h1>
            <p class="hero-subtitle font-terminal">
                Portfolio Interface Initialized. Operator: [Your Name]. <br> Specializing in [Your Main Skill/Field]. Core OS: DataCore v3.2
            </p>
            <div class="mt-8">
                <a href="projects.html" class="btn btn-primary block-element font-terminal">Access Project Archives</a>
            </div>
             <p class="mt-12 font-terminal text-sm text-text-secondary">
                This terminal grants access to declassified operational records and skill assessments for Operator [Your Name].<br>
                Navigate via the console on the left. All transmissions are monitored.
            </p>
        </section>

        <section class="section-panel block-element">
            <h2 class="section-title text-accent-cyan font-terminal">// SYSTEM_OVERVIEW :: QUICK_ACCESS</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-bg-card p-6 block-element border border-border-subtle">
                    <h3 class="font-terminal text-accent-orange text-lg mb-2">Latest Intel // About</h3>
                    <p class="text-sm mb-4">Access background information, mission statement, and operational history of Operator [Your Name].</p>
                    <a href="about.html" class="btn btn-secondary btn-sm block-element font-terminal w-full text-center">View About Page &gt;&gt;</a>
                </div>
                <div class="bg-bg-card p-6 block-element border border-border-subtle">
                    <h3 class="font-terminal text-accent-orange text-lg mb-2">Project Databanks</h3>
                    <p class="text-sm mb-4">Browse a curated list of completed missions, system developments, and classified project files.</p>
                    <a href="projects.html" class="btn btn-secondary btn-sm block-element font-terminal w-full text-center">View Projects Page &gt;&gt;</a>
                </div>
            </div>
        </section>
        <!-- =============================================================== -->
        <!-- END: Page Specific Content for index.html (Home Page)          -->
        <!-- =============================================================== -->

        <!-- Footer (Common to all pages) -->
        <footer class="footer-terminal block-element">
            <p>&copy; <span id="currentYear"></span> [Your Name/Alias]. All rights reserved. <span id="security-status-text">System integrity maintained.</span></p>
            <p class="font-terminal text-xs">DATA CORE INTERFACE v3.2 // LAST SCAN: <span id="lastScanTime"></span></p>
        </footer>
    </main>

    <script>
        const initialLogonScreen = document.getElementById('initial-logon-screen');
        const initialLogOutput = document.getElementById('initial-log-output');
        const sidebarLogScreen = document.getElementById('animated-log-screen');
        const bodyElement = document.body;

        const initialLogLines = [
            { text: "INITIALIZING SYSTEM BOOT SEQUENCE...", class: "system" },
            { text: "MEMORY CHECK: 64 ZETTABYTES OK", class: "jargon" },
            { text: "QUANTUM CORE ALIGNMENT: IN PROGRESS...", class: "jargon" },
            { text: "DECRYPTING PRIMARY DIRECTIVES...", class: "jargon" },
            { text: "Bullying Mi-hwa the beloved <3", class: "mihwa" },
            { text: "LOADING USER AUTHENTICATION MODULE...", class: "system" },
            { text: "BIOMETRIC SCAN: MATCH FOUND - OPERATOR [YOUR NAME]", class: "system" },
            { text: "ESTABLISHING SECURE DATALINK...", class: "jargon" },
            { text: "INTERFACE PROTOCOLS ACTIVATED.", class: "system" },
            { text: "WELCOME, OPERATOR.", class: "system" },
        ];

        const sidebarLogJargon = [
            "Monitoring network traffic...", "Analyzing threat vectors...",
            "System performance optimal.", "Data integrity verified.",
            "Quantum entanglement stable.", "No anomalies detected."
        ];
        const sidebarMihwaLine = "Bullying Mi-hwa the beloved <3";

        const typingSpeed = 40;
        const linePause = 300;
        const initialSequenceLinePause = 500; // Slower for initial boot

        // Corrected function definition: removed 'element' parameter
        function typeLine(text, className, outputContainer, callback, speed = typingSpeed, pause = linePause) {
            if (!outputContainer) return; // Ensure outputContainer is a valid DOM element
            const lineElem = document.createElement('span');
            lineElem.className = `log-line ${className}`;
            outputContainer.appendChild(lineElem); // This should now work
            let charIndex = 0;

            function typeChar() {
                if (charIndex < text.length) {
                    lineElem.textContent += text.charAt(charIndex);
                    charIndex++;
                    outputContainer.scrollTop = outputContainer.scrollHeight;
                    setTimeout(typeChar, speed);
                } else {
                    outputContainer.scrollTop = outputContainer.scrollHeight;
                    if (callback) setTimeout(callback, pause);
                }
            }
            typeChar();
        }

        function runInitialLogon() {
            let currentLineIndex = 0;
            function nextInitialLine() {
                if (currentLineIndex < initialLogLines.length) {
                    const line = initialLogLines[currentLineIndex];
                    // Call with corrected argument mapping for the modified typeLine
                    typeLine(line.text.replace("[YOUR NAME]", "Operator"), line.class, initialLogOutput, nextInitialLine, typingSpeed, initialSequenceLinePause);
                    currentLineIndex++;
                } else {
                    // Initial logon finished
                    setTimeout(() => {
                        if (initialLogonScreen) initialLogonScreen.style.display = 'none';
                        bodyElement.classList.add('loaded');
                        startSidebarLogAnimation(); // Start the continuous sidebar log
                        initializePageFunctions(); // Initialize other common page functions
                    }, 1000); // Pause before revealing main content
                }
            }
            if (initialLogOutput) {
                initialLogOutput.innerHTML = ''; // Clear before starting
                nextInitialLine();
            } else { // Fallback if initial log output isn't there for some reason
                 console.error("Initial log output element not found. Skipping initial log.");
                 bodyElement.classList.add('loaded');
                 startSidebarLogAnimation();
                 initializePageFunctions();
            }
        }
        
        let sidebarJargonIndex = 0;
        function startSidebarLogAnimation() {
            if (!sidebarLogScreen) return;
            sidebarLogScreen.innerHTML = ''; // Clear previous logs

            function nextSidebarLine() {
                let text, className, pause;
                if (sidebarJargonIndex % 4 === 2) { // Show Mi-hwa line periodically
                    text = sidebarMihwaLine;
                    className = 'mihwa';
                    pause = 2000;
                } else {
                    text = sidebarLogJargon[sidebarJargonIndex % sidebarLogJargon.length];
                    className = 'jargon';
                    pause = 1500 + Math.random() * 1000; // Vary pause for sidebar
                }
                // Call with corrected argument mapping for the modified typeLine
                typeLine(text, className, sidebarLogScreen, nextSidebarLine, 30, pause);
                sidebarJargonIndex++;
            }
            nextSidebarLine();
        }

        // --- Functions to be called AFTER initial logon ---
        function initializePageFunctions() {
            setActiveNavLink();
            filterProjects(); 
            startFooterStatusCycle();
            updateScanTime(); 
            setInterval(updateScanTime, 1000 * 60);

            // Contact form listener (if present on the page)
            // Ensure your contact form has id="contact-form" or adjust selector
            const contactForm = document.querySelector('#main-content form'); 
            if (contactForm && contactForm.closest('section[id="contact"]')) { 
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    // Using custom message box logic if available, otherwise alert
                    if (typeof showMessage === 'function') {
                        showMessage("TRANSMISSION SENT. AWAITING RESPONSE. (This is a demo - no data was actually sent)");
                    } else {
                        alert("TRANSMISSION SENT. AWAITING RESPONSE. (This is a demo - no data was actually sent)");
                    }
                    this.reset();
                });
            }
        }
        
        // --- Active Navigation Link ---
        function setActiveNavLink() {
            const currentPath = window.location.pathname.split("/").pop() || "index.html";
            document.querySelectorAll('#sidebar .main-nav a').forEach(link => {
                link.classList.remove('active');
                const linkPath = link.getAttribute('href').split("/").pop();
                if (linkPath === currentPath || (currentPath === "" && linkPath === "index.html") ) {
                    link.classList.add('active');
                }
            });
        }

        // --- Project Search and Category Filter ---
        const searchInput = document.getElementById('search-input');
        const categoryFilter = document.getElementById('category-filter');
        function filterProjects() {
            const projectGrid = document.getElementById('project-grid');
            if (!projectGrid) return; 
            const projectCards = projectGrid.querySelectorAll('.project-card');
            const searchTerm = searchInput ? searchInput.value.toLowerCase() : "";
            const selectedCategory = categoryFilter ? categoryFilter.value : "all";

            projectCards.forEach(card => {
                const title = (card.dataset.title || '').toLowerCase();
                const description = (card.dataset.description || '').toLowerCase();
                const category = (card.dataset.category || '').toLowerCase();
                
                const matchesSearch = searchTerm === "" || title.includes(searchTerm) || description.includes(searchTerm);
                const matchesCategory = selectedCategory === 'all' || category.includes(selectedCategory);

                // Using display style instead of class for simpler show/hide
                card.style.display = (matchesSearch && matchesCategory) ? '' : 'none';
            });
        }
        if (searchInput) searchInput.addEventListener('keyup', filterProjects);
        if (categoryFilter) categoryFilter.addEventListener('change', filterProjects);

        // --- Footer Dynamic Content ---
        if(document.getElementById('currentYear')) {
            document.getElementById('currentYear').textContent = new Date().getFullYear();
        }
        function updateScanTime() {
            const scanTimeElem = document.getElementById('lastScanTime');
            if (scanTimeElem) {
                const now = new Date();
                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
                const dateString = now.toLocaleDateString([], {year: 'numeric', month: '2-digit', day: '2-digit'});
                scanTimeElem.textContent = `${dateString} ${timeString} UTC`;
            }
        }
        
        // --- Footer Security Status Cycling ---
        const securityStatusMessages = [
            "System integrity maintained.",
            "All channels secure. No breaches detected.",
            "Threat matrix nominal. Vigilance protocols active.",
            "Data encryption at maximum strength.",
            "Network monitored. Perimeter holding strong."
        ];
        let currentStatusIndex = 0;
        function startFooterStatusCycle() {
            const statusElement = document.getElementById('security-status-text');
            if (statusElement) {
                setInterval(() => {
                    currentStatusIndex = (currentStatusIndex + 1) % securityStatusMessages.length;
                    statusElement.textContent = securityStatusMessages[currentStatusIndex];
                }, 30000); // Change every 30 seconds
            }
        }
        
        // --- Initialize on Page Load ---
        window.onload = runInitialLogon;
    </script>
</body>
</html>
